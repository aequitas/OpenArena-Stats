server {
    listen          80;
    server_name     www.oastats.dev oastats.dev;
    root            /Volumes/HDD/Projects/OpenArena-Stats;

    index           index.php index.html index.htm;

    error_log       /opt/local/var/log/nginx/oastats.dev.error.log;
    access_log      /opt/local/var/log/nginx/oastats.dev.access.log;

    rewrite ^/([a-zA-Z0-9-_\ ]+)/?$ /index.php?player=$1 last;
    rewrite ^/([a-zA-Z0-9-_\ ]+)/([0-9-]+)/?$ /index.php?player=$1&from=$2 last;
    rewrite ^/([a-zA-Z0-9-_\ ]+)/([0-9-]+)/([0-9-]+)/?$ /index.php?player=$1&from=$2&until=$3 last;
    rewrite ^/map/([a-zA-Z0-9-_\ ]+)/?$ /index.php?map=$1 last;

    location / {
        try_files $uri $uri/ /index.php /index.html;
    }

    location ~ \.php$ {
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include        /opt/local/etc/nginx/conf/fastcgi_params;
    }
}
